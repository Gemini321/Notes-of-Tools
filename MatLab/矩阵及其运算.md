# MatLab的矩阵及其运算

## 变量

与C/C++类似，赋值时使用``variable = value``，使用分号';'分隔语句。
特殊变量如下：

| 变量名 |               意义               |
| :----: | :------------------------------: |
|  ans   |     默认返回上一次操作的结果     |
|  eps   |         浮点数的相对误差         |
|  i, j  | 虚数单位，定义为 $i^2 = j^2 = -1$ |
|  Inf   |              无穷大              |
|  NaN   |            表示不定值            |
|   pi   |              圆周率              |

在命令行中输入``who``可以获取当前已使用的所有变量名，``whos``则显示更多关于内存和大小的信息；``clear (variable)``表示清楚variable变量的值，未指定
表示清除所有变量的值。

## 操作符

常见操作符见[该网站](https://www.w3cschool.cn/matlab/matlab-bufy28gd.html)。

常见命令及函数见[该网站](https://www.w3cschool.cn/matlab/matlab-by7428gf.html)

## 数值格式

```Matlab
format long % 显示小数点后16位
x = 7 + 10/3 + 5 ^ 1.2 % x = 17.231981640639408

format short % 显示小数点后4位（默认）
x = 7 + 10/3 + 5 ^ 1.2 % x = 17.2320

format bank % 显示小数点后2位
daily_wage = 177.45;
weekly_wage = daily_wage * 6 % weekly_wage = 1064.70

format short e % 指数形式显示小数点后4位
4.678 * 4.9    % ans = 2.2922e+01

format rat  % 显示距离该值最接近的有理式
4.678 * 4.9 % 2063/90
```

## 创建向量与矩阵

MatLab中允许创建两种类型的向量：行向量和列向量。

```Matlab
% 直接产生法
r = [1 2 3 4 5];           % 创建行向量
s = [1; 2; 3; 4; 5];       % 创建列向量
m = [1 2 3; 4 5 6; 7 8 9]; % 创建3x3矩阵

% 向量法
r = 1:2:10; % 初始值为1，步长为2，最大值为10的向量（值域[1, 10]）

% 函数法
m = [];       % 空矩阵
m = ones(5);  % 5x5的全1矩阵（只提供一个元素n时，默认为nxn矩阵）
m = eyes(5);  % 5x5的单位矩阵
m = zeros(5); % 5x5的全0矩阵
m = rand(5);  % [0,1]随机分布的5x5矩阵
m = 10 + sqrt(1/100) .* randn(5, 5); % 均值为10，标准差为1/100的5x5正态分布矩阵
```

注意：在MatLab中的切片为闭区间，即``r = 1: 2``$\Leftrightarrow$``r = [1, 2]``

## 矩阵元素引用

在MatLab中矩阵元素的引用使用'()'：

```Matlab
% 下标引用
A = [1 2 3; 4 5 6; 7 8 9; 10 11 12];
b = A(1, 2); % 取矩阵中坐标为(1, 2)的元素，其中行列均从1开始计数
c = A(1, :); % 取矩阵的第一行
d = A(:)     % 将A的每一列取出合并为列向量

% 向量引用
vr = [1 2 3];
vc = [2 3];
new_A = A(vr, vc); # vr x vc作笛卡尔积产生的坐标构成新的矩阵
```

## 矩阵操作

```Matlab
% 矩阵合并
A = [1 2 3];
B = [4 5 6];
C = [A, B];
C = [A B];
C = cat(2, A, B); % C = horzcat(A, B);
C = [A; B];
C = cat(1, A, B); % C = vertcat(A, B);

% 矩阵转置
A_trav = A';

% 矩阵计算
C = A + B;
C = A - B;
C = A * B;  % 矩阵乘法
C = A .* B; % 矩阵点乘(element-wise)
C = A / B;  % 矩阵除法
C = A ./ B; % 矩阵点除（B中元素作除数）
C = A.\ B;  % 矩阵点除（A中元素作除数）
C = A ^ c;  % 标量幂
C = A .^ B; % A矩阵对应元素取幂
C = A >= B; % A与B逐元素比较，生成01矩阵
C = ~A;     % A取非
C = A | B;  % A、B取并
C = A & B;  % A、B取交
C = A ~= B; % A、B的不同元素
C = xor(A, B); % any(A), all(A)同

% 矩阵修改
A(1, :) = [0 0 0]; % A矩阵第1行变为0
A(1, :) = [];      % 通过赋空值的方式删除行
```

## 矩阵的线性运算

```Matlab
A = [1 2 3; 4 5 6; 7 8 9]
% 求逆矩阵
A_inv = inv(A);   % 若A是奇异矩阵（线性相关）或接近奇异矩阵，可能出错
A_pinv = pinv(A); % 若A不存在逆矩阵时，求A的伪逆矩阵

% 求行列式
A_det = det(A);   % A需要是n阶方阵

% 求矩阵的秩
A_rank = rank(A);

% 求矩阵的特征值与特征向量
A_lamda = eig(A);      % A_lamda为A特征值构成的列向量
[V, A_lamda] = eig(A); % V为特征向量构成的矩阵，A_lamda为对角化后的对角矩阵

% 线性方程组求解
X = null(A);     % 求解齐次线性方程组A
X = null(A,'r'); % 求解齐次线性方程组A的有理数形式
X = A \ b;
```
